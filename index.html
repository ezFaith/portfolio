<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dipankar Saha - Cybersecurity Professional</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* CSS Variables for Dark and Light Mode */
        :root {
            --background: #000000;
            --surface: rgba(25, 25, 25, 0.5);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --accent: #00D5FF;
            --card-border: rgba(255, 255, 255, 0.1);
        }
        
        body.light-mode {
            --background: #FFFFFF;
            --surface: rgba(255, 255, 255, 0.5);
            --text-primary: #1D1D1F;
            --text-secondary: #6E6E73;
            --accent: #0071E3;
            --card-border: rgba(0, 0, 0, 0.1);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.5s ease, color 0.5s ease;
            overflow-x: hidden;
            position: relative;
        }

        /* Two Separate Canvas Backgrounds for different modes */
        #dark-mode-canvas, #light-mode-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0;
            transition: opacity 1s ease;
        }

        body.dark-mode #dark-mode-canvas {
            opacity: 1;
        }

        body.light-mode #light-mode-canvas {
            opacity: 1;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-direction: column;
            padding: 0 1rem;
            position: relative;
            z-index: 1;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.8) 100%);
            z-index: -1;
            transition: background 0.5s ease;
        }

        body.light-mode .hero::before {
            background: radial-gradient(circle, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.8) 100%);
        }

        .hero h1 {
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 600;
            letter-spacing: -0.05em;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 1s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .hero p {
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            font-weight: 300;
            color: var(--text-secondary);
            margin-top: 1rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 1s 0.2s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            background: var(--surface);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--card-border);
            padding: 1.2rem 0;
            transition: background 0.5s ease, backdrop-filter 0.5s ease, border-bottom 0.5s ease;
        }
        
        .navbar-content {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .navbar ul {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        .navbar a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: color 0.3s ease, transform 0.3s ease;
            position: relative;
        }

        .navbar a:hover,
        .navbar a.active {
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .mode-toggle {
            cursor: pointer;
            font-size: 1.25rem;
            color: var(--text-secondary);
            transition: color 0.3s ease;
            position: absolute;
            right: 2rem;
        }

        .mode-toggle:hover {
            color: var(--text-primary);
        }
        
        /* Sections & Headings */
        section {
            padding: 8rem 0;
            position: relative;
            z-index: 1;
        }

        .section-heading {
            font-size: clamp(2.5rem, 5vw, 3rem);
            font-weight: 600;
            text-align: center;
            margin-bottom: 5rem;
            color: var(--text-primary);
        }
        
        /* Cards & Components */
        .card {
            background-color: transparent;
            border-radius: 15px;
            padding: 0;
            margin-bottom: 2.5rem;
            position: relative;
            z-index: 1;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--surface);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            border: 1px solid var(--card-border);
            z-index: -1;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .card:hover::before {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--accent);
        }

        .card-content {
            padding: 3rem;
            z-index: 1;
            position: relative;
        }

        /* About Section */
        #about .about-content {
            font-size: 1.15rem;
            line-height: 1.8;
            text-align: justify;
            max-width: 800px;
            margin: 0 auto;
            color: var(--text-secondary);
        }

        /* Education & Contact Items */
        .info-item {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            font-size: 1.1rem;
            font-weight: 400;
            color: var(--text-secondary);
        }

        .info-item h3 {
            font-size: 1.6rem;
            color: var(--text-primary);
        }

        .info-item i {
            font-size: 2rem;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        
        .contact-grid {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin-top: 2rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            background-color: var(--surface);
            backdrop-filter: blur(10px);
            padding: 1.5rem 2rem;
            border-radius: 10px;
            border: 1px solid var(--card-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .contact-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .contact-item i {
            font-size: 1.5rem;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }
        
        .contact-item a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .contact-item:hover i, .contact-item:hover a {
            color: var(--text-primary);
        }

        /* Skills */
        .skills-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .skill-item {
            background-color: var(--surface);
            color: var(--text-secondary);
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            white-space: nowrap;
            transition: all 0.3s ease, background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease;
            border: 1px solid var(--card-border);
        }
        
        .skill-item:hover {
            transform: scale(1.05);
            background-color: var(--text-primary);
            color: var(--background);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        /* Projects */
        .project-card .card-content {
            border-left: 3px solid var(--accent);
            border-radius: 10px;
        }
        
        .project-card h3 {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .project-card p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            text-align: justify;
        }

        .project-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        
        .project-links a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .project-links a:hover {
            color: var(--text-primary);
        }

        .project-skills .skill-item {
            background: var(--surface);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .project-skills .skill-item:hover {
            background: var(--text-primary);
            color: var(--background);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 0;
            background-color: var(--surface);
            color: var(--text-secondary);
            font-size: 0.9rem;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        #local-time {
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Scroll-triggered Animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Keyframe Animations */
        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>
    <canvas id="dark-mode-canvas"></canvas>
    <canvas id="light-mode-canvas"></canvas>

    <header class="hero">
        <h1>Dipankar Saha</h1>
        <p>Aspiring Cybersecurity Professional</p>
    </header>

    <nav class="navbar">
        <div class="container navbar-content">
            <ul>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#education" class="nav-link">Education</a></li>
                <li><a href="#skills" class="nav-link">Skills</a></li>
                <li><a href="#projects" class="nav-link">Projects</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            <div class="mode-toggle" id="mode-toggle">
                <i class="fas fa-moon"></i>
            </div>
        </div>
    </nav>

    <main>
        <section id="about" class="animate-on-scroll">
            <div class="container">
                <h2 class="section-heading">About Me</h2>
                <div class="card">
                    <div class="card-content">
                        <p class="about-content">
                            I am a Cybersecurity professional with a Master‚Äôs degree in Information Technology, driven by a passion for securing complex digital environments. My technical skill set spans across system administration, network security, and cloud technologies, with a hands-on approach to incident response and risk management. I have a proven track record of troubleshooting and configuring devices to build resilient systems. I am a proactive problem-solver and quick learner, continuously expanding my knowledge to stay ahead of evolving cyber threats. I am eager to collaborate on projects that demand innovative solutions and a high level of technical rigor.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="education" class="animate-on-scroll">
            <div class="container">
                <h2 class="section-heading">Education</h2>
                <div class="card">
                    <div class="card-content info-item">
                        <i class="fas fa-graduation-cap"></i>
                        <div>
                            <h3>Master of Science in IT (Cyber Security)</h3>
                            <p>Maulana Abul Kalam Azad University of Technology<br>2024-2026</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="skills" class="animate-on-scroll">
            <div class="container">
                <h2 class="section-heading">Technical Skills</h2>
                <div class="card">
                    <div class="card-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 1.5rem;">Security Operations & Analysis</h3>
                        <div class="skills-grid">
                            <div class="skill-item">SIEM</div>
                            <div class="skill-item">Log Analysis & Parsing</div>
                            <div class="skill-item">Threat Detection</div>
                            <div class="skill-item">Incident Handling</div>
                            <div class="skill-item">Alert Triage</div>
                            <div class="skill-item">Threat Intelligence</div>
                            <div class="skill-item">Threat Hunting</div>
                            <div class="skill-item">Malware Analysis</div>
                            <div class="skill-item">Vulnerability Analysis & Scanning</div>
                        </div>
                        
                        <h3 style="color: var(--text-primary); margin-top: 3rem; margin-bottom: 1.5rem;">Tools & Platforms</h3>
                        <div class="skills-grid">
                            <div class="skill-item">Splunk</div>
                            <div class="skill-item">ELK Stack (Elasticsearch, Logstash, Kibana)</div>
                            <div class="skill-item">Wireshark</div>
                            <div class="skill-item">Nmap</div>
                            <div class="skill-item">Nessus</div>
                            <div class="skill-item">Metasploit</div>
                            <div class="skill-item">Firewalls</div>
                        </div>
                        
                        <h3 style="color: var(--text-primary); margin-top: 3rem; margin-bottom: 1.5rem;">System & Scripting</h3>
                        <div class="skills-grid">
                            <div class="skill-item">Python</div>
                            <div class="skill-item">PowerShell</div>
                            <div class="skill-item">Bash Scripting</div>
                            <div class="skill-item">Windows Server</div>
                            <div class="skill-item">Linux (Ubuntu/Kali)</div>
                            <div class="skill-item">System Administration</div>
                            <div class="skill-item">Network Security</div>
                        </div>
                        
                        <h3 style="color: var(--text-primary); margin-top: 3rem; margin-bottom: 1.5rem;">Soft Skills</h3>
                        <div class="skills-grid">
                            <div class="skill-item">Analytical Thinking</div>
                            <div class="skill-item">Critical Thinking</div>
                            <div class="skill-item">Problem Solving</div>
                            <div class="skill-item">Root Cause Analysis</div>
                            <div class="skill-item">Quick Learner</div>
                            <div class="skill-item">Excellent Communication</div>
                            <div class="skill-item">Teamwork</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="animate-on-scroll">
            <div class="container">
                <h2 class="section-heading">Projects</h2>
                <div class="card project-card">
                    <div class="card-content">
                        <h3>üñºÔ∏è Image Steganography Tool</h3>
                        <p><strong>Technologies:</strong> Python, OpenCV, Cryptography, NumPy</p>
                        <p>Developed a secure data transmission system leveraging steganography and cryptography to conceal sensitive information within images. This project ensures confidentiality, integrity, and covert communication using advanced encryption and image processing techniques.</p>
                        <div class="project-links">
                            <strong><a href="https://github.com/ezFaith/project_steganography.git" target="_blank">View on Github <i class="fas fa-external-link-alt"></i></a></strong>
                        </div>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">Cybersecurity</div>
                            <div class="skill-item">Data Encryption</div>
                            <div class="skill-item">Steganography</div>
                            <div class="skill-item">Python</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>üß† Mental Health Chatbot</h3>
                        <p><strong>Technologies:</strong> React.js, Vite, Node.js, Express, REST API</p>
                        <p>Developed an AI-powered chatbot designed to provide mental health support and guidance. This chatbot enhances accessibility to mental well-being resources by offering interactive and empathetic conversations.</p>
                        <div class="project-links">
                            <strong><a href="https://mental-health-chatbot-silk.vercel.app/" target="_blank">Live Demo <i class="fas fa-external-link-alt"></i></a></strong>
                            <strong><a href="https://github.com/ezFaith/mental-health-chatbot" target="_blank">View on GitHub <i class="fas fa-external-link-alt"></i></a></strong>
                        </div>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">Full-Stack Development</div>
                            <div class="skill-item">React.js</div>
                            <div class="skill-item">Node.js</div>
                            <div class="skill-item">REST API</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>üí∞ ATM Machine Simulation</h3>
                        <p><strong>Technologies:</strong> Python, OOP, File Handling</p>
                        <p>Developed a Python-based ATM Machine Simulation replicating essential banking functionalities such as balance inquiry, cash withdrawal, deposits, and PIN changes. The project implements authentication and financial data security best practices.</p>
                        <div class="project-links">
                            <strong><a href="https://github.com/ezFaith/ATM-Machine-Simulation.git" target="_blank">View on GitHub <i class="fas fa-external-link-alt"></i></a></strong>
                        </div>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">Python</div>
                            <div class="skill-item">OOP</div>
                            <div class="skill-item">Data Validation</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>üåê Home-Lab & Workplace Network Setup</h3>
                        <p><strong>Technologies:</strong> Security, Networking, Device Configuration</p>
                        <p>Designed and implemented a secure workplace network, configuring routers, switches, firewalls, VLANs, and QoS for optimal performance and security. Applied IP addressing, wireless networks, and troubleshooting to enhance connectivity and reliability. Currently building and configuring a personal cybersecurity home lab to enhance practical skills in network and system security.</p>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">Networking</div>
                            <div class="skill-item">Cybersecurity</div>
                            <div class="skill-item">System Admin</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>Portfolio Website</h3>
                        <p>Designed and developed a responsive portfolio to showcase personal projects and web development skills with a clean, user-friendly UI.</p>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">HTML5</div>
                            <div class="skill-item">CSS3</div>
                            <div class="skill-item">Javascript</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>Top 10 Cultures and Heritages of India</h3>
                        <p>Created an interactive website highlighting India‚Äôs rich cultures and heritage, optimizing layout for an engaging user experience.</p>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">HTML5</div>
                            <div class="skill-item">CSS3</div>
                        </div>
                    </div>
                </div>

                <div class="card project-card">
                    <div class="card-content">
                        <h3>Petrix E-commerce Landing Page</h3>
                        <p>Developed a functional e-commerce landing page for the Petrix robotic pet product, focusing on branding, user engagement, and UI/UX design.</p>
                        <div class="skills-grid project-skills">
                            <div class="skill-item">HTML5</div>
                            <div class="skill-item">CSS3</div>
                            <div class="skill-item">Javascript</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="animate-on-scroll">
            <div class="container">
                <h2 class="section-heading">Contact Me</h2>
                <div class="contact-grid">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:dsaha0427@gmail.com">dsaha0427@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-linkedin"></i>
                        <a href="https://linkedin.com/in/dipankarsaha2001" target="_blank">LinkedIn Profile</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-github"></i>
                        <a href="https://github.com/ezFaith" target="_blank">Github</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Dipankar Saha. All rights reserved.</p>
            <div id="local-time"></div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Smooth scroll links
            document.querySelectorAll('.nav-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // Intersection Observer for scroll-triggered animations
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('section, .card').forEach(el => {
                observer.observe(el);
            });

            // Dark/Light Mode Toggle & Canvas Management
            const darkModeCanvas = document.getElementById('dark-mode-canvas');
            const lightModeCanvas = document.getElementById('light-mode-canvas');
            const modeToggle = document.getElementById('mode-toggle');

            let threeRenderer, threeScene, threeCamera, particlesMesh;
            let liquidCtx, liquidParticles = [], liquidAnimationId;

            const startThreeJS = () => {
                stopLiquidAnimation();
                darkModeCanvas.style.opacity = 1;
                lightModeCanvas.style.opacity = 0;

                threeScene = new THREE.Scene();
                threeCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                threeRenderer = new THREE.WebGLRenderer({ canvas: darkModeCanvas, antialias: true, alpha: true });
                threeRenderer.setSize(window.innerWidth, window.innerHeight);
                threeCamera.position.z = 50;

                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 2000;
                const posArray = new Float32Array(particlesCount * 3);
                for (let i = 0; i < particlesCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 200;
                }
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                
                const particlesMaterial = new THREE.PointsMaterial({
                    size: 0.1,
                    color: 0x00d5ff,
                    transparent: true,
                    blending: THREE.AdditiveBlending,
                    opacity: 0.8
                });
                particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                threeScene.add(particlesMesh);

                const animateThreeJS = () => {
                    if (!threeRenderer) return;
                    requestAnimationFrame(animateThreeJS);
                    particlesMesh.rotation.y += 0.0005;
                    particlesMesh.rotation.x += 0.0002;
                    threeRenderer.render(threeScene, threeCamera);
                };
                animateThreeJS();
            };

            const stopThreeJS = () => {
                if (threeRenderer) {
                    threeRenderer.dispose();
                    threeRenderer = null;
                }
            };
            
            const startLiquidAnimation = () => {
                stopThreeJS();
                darkModeCanvas.style.opacity = 0;
                lightModeCanvas.style.opacity = 1;
                
                lightModeCanvas.width = window.innerWidth;
                lightModeCanvas.height = window.innerHeight;
                liquidCtx = lightModeCanvas.getContext('2d');
                liquidParticles = [];

                for (let i = 0; i < 50; i++) {
                    liquidParticles.push({
                        x: Math.random() * window.innerWidth,
                        y: Math.random() * window.innerHeight,
                        r: Math.random() * 50 + 20,
                        vx: (Math.random() - 0.5) * 0.5,
                        vy: (Math.random() - 0.5) * 0.5
                    });
                }
                
                const animateLiquid = () => {
                    liquidAnimationId = requestAnimationFrame(animateLiquid);
                    liquidCtx.clearRect(0, 0, lightModeCanvas.width, lightModeCanvas.height);
                    
                    const gradient = liquidCtx.createRadialGradient(
                        lightModeCanvas.width / 2, lightModeCanvas.height / 2, 0,
                        lightModeCanvas.width / 2, lightModeCanvas.height / 2, Math.max(lightModeCanvas.width, lightModeCanvas.height) / 1.5
                    );
                    gradient.addColorStop(0, '#EFF5D2'); // New color
                    gradient.addColorStop(1, 'rgba(239, 245, 210, 0)'); // Fade to transparent
                    liquidCtx.fillStyle = gradient;
                    liquidCtx.fillRect(0, 0, lightModeCanvas.width, lightModeCanvas.height);

                    liquidParticles.forEach(p => {
                        p.x += p.vx;
                        p.y += p.vy;
                        
                        if (p.x < 0 || p.x > window.innerWidth) p.vx *= -1;
                        if (p.y < 0 || p.y > window.innerHeight) p.vy *= -1;
                        
                        liquidCtx.beginPath();
                        liquidCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                        liquidCtx.fillStyle = `rgba(239, 245, 210, ${0.3 + p.r / 100})`; // Particle color
                        liquidCtx.fill();
                    });
                };
                animateLiquid();
            };

            const stopLiquidAnimation = () => {
                cancelAnimationFrame(liquidAnimationId);
            };

            const handleModeChange = (isLightMode) => {
                if (isLightMode) {
                    startLiquidAnimation();
                } else {
                    startThreeJS();
                }
            };

            modeToggle.addEventListener('click', () => {
                const isLightMode = document.body.classList.toggle('light-mode');
                localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
                modeToggle.innerHTML = isLightMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                handleModeChange(isLightMode);
            });

            // Set initial theme and start animation
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                modeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.body.classList.add('dark-mode');
                modeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
            handleModeChange(document.body.classList.contains('light-mode'));

            // Dynamic Local Time for the user's location
            const updateLocalTime = () => {
                const now = new Date();
                const options = { 
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
                    hour: '2-digit', minute: '2-digit', second: '2-digit',
                    timeZoneName: 'short'
                };
                const formattedTime = now.toLocaleDateString(undefined, options);
                document.getElementById('local-time').textContent = `Current local time: ${formattedTime}`;
            };

            updateLocalTime();
            setInterval(updateLocalTime, 1000);

            // Handle window resize for both canvases
            window.addEventListener('resize', () => {
                if (threeRenderer) {
                    threeCamera.aspect = window.innerWidth / window.innerHeight;
                    threeCamera.updateProjectionMatrix();
                    threeRenderer.setSize(window.innerWidth, window.innerHeight);
                }
                if (liquidCtx) {
                    lightModeCanvas.width = window.innerWidth;
                    lightModeCanvas.height = window.innerHeight;
                }
            });
        });
    </script>
</body>
</html>
